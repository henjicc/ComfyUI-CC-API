# ComfyUI-CC-API

ComfyUI自定义节点，用于调用各种API，支持文本、图片、音频、视频的输入和输出。

## 功能特点

- 支持多种API调用
- 文本、图片、音频、视频输入输出
- 可配置的API密钥管理
- 图片处理工具类

## 安装

1. 将此节点文件夹放入ComfyUI的`custom_nodes`目录
2. 安装依赖：`pip install -r requirements.txt`
3. 重启ComfyUI

## 使用方法

### 配置API密钥

在`config.ini`文件中配置您的API密钥：

```ini
[API]
CC_API_KEY = your_api_key_here
```

或者在节点中直接输入API密钥。

### Seedream 4.0节点

Seedream 4.0节点是一个文生图、图生图的节点，支持单图生成和组图生成功能，可以输入文本或图片，最终输出图片。

#### 输入参数

- **prompt** (字符串): 生成图像的提示词，支持中英文。建议不超过300个汉字或600个英文单词。
- **size** (选择): 图像尺寸，支持两种方式：
  - 方式1: 1K、2K、4K（指定生成图像的分辨率，并在prompt中用自然语言描述图片宽高比）
  - 方式2: 自定义尺寸（如2048x2048）
  - 默认值: 2048x2048
- **sequential_image_generation** (选择): 是否启用组图功能
  - disabled: 关闭组图功能，只生成一张图（默认值）
  - auto: 自动判断模式，模型会根据提示词判断是否返回组图
- **max_images** (整数): 最多可生成的图片数量，范围1-15。仅在sequential_image_generation为auto时生效。默认值: 15
- **image** (图片，可选): 输入的参考图片，支持单图或多图输入（最多10张）
- **api_key** (字符串，可选): API密钥，如果不填写则使用config.ini中的配置

#### 输出

- **IMAGE**: 生成的图片

### 组图功能说明

组图功能基于您输入的内容，生成一组内容关联的图片。支持以下模式：

1. **文生组图**: 根据文本提示词生成一组内容关联的图片（最多15张）
2. **单图生组图**: 根据单张参考图片+文本提示词生成一组内容关联的图片（最多14张）
3. **多图生组图**: 根据多张参考图片（2-10张）+文本提示词生成一组内容关联的图片（输入的参考图数量+最终生成的图片数量≤15张）

### 单图生成功能说明

1. **文生图**: 根据文本提示词生成单张图片
2. **单图生图**: 根据单张参考图片+文本提示词生成单张图片
3. **多图生图**: 根据多张参考图片（2-10张）+文本提示词生成单张图片

## 示例工作流

请参考`example_workflows`目录中的示例。

## 许可证

MIT License