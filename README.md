# ComfyUI-CC-API

ComfyUI自定义节点，用于调用各种API，支持文本、图片、音频、视频的输入和输出。

## 功能特点

- 支持多种API调用
- 文本、图片、音频、视频输入输出
- 可配置的API密钥管理
- 图片处理工具类

## 安装

1. 将此节点文件夹放入ComfyUI的`custom_nodes`目录
2. 安装依赖：`pip install -r requirements.txt`
3. 重启ComfyUI

## 使用方法

### 配置API密钥

在`config.ini`文件中配置您的API密钥：

```ini
[API]
CC_API_KEY = your_api_key_here
```

或者在节点中直接输入API密钥。

### Seedream 4.0节点

Seedream 4.0节点是一个文生图、图生图的节点，支持单图生成和组图生成功能，可以输入文本或图片，最终输出图片。

#### 输入参数

- **prompt** (字符串): 生成图像的提示词，支持中英文。建议不超过300个汉字或600个英文单词。
- **size** (选择): 图像尺寸，支持两种方式：
  - 方式1: 1K、2K、4K（指定生成图像的分辨率，并在prompt中用自然语言描述图片宽高比）
  - 方式2: 自定义尺寸（如2048x2048）
  - 默认值: 2048x2048
- **sequential_image_generation** (选择): 是否启用组图功能
  - disabled: 关闭组图功能，只生成一张图（默认值）
  - auto: 自动判断模式，模型会根据提示词判断是否返回组图
- **max_images** (整数): 最多可生成的图片数量，范围1-15。仅在sequential_image_generation为auto时生效。默认值: 15
- **image** (图片，可选): 输入的参考图片，支持单图或多图输入（最多10张）
- **api_key** (字符串，可选): API密钥，如果不填写则使用config.ini中的配置

#### 输出

- **IMAGE**: 生成的图片

### MiniMax声音克隆节点

MiniMax声音克隆节点允许您通过上传音频文件来克隆音色，并可选择提供示例音频以增强克隆效果。

#### 输入参数

- **clone_audio** (音频): 待克隆的音频文件，支持mp3、m4a、wav格式，时长最少应不低于10秒，最长应不超过5分钟。
- **voice_id** (字符串): 自定义克隆音色ID，长度8-256，首字符必须为英文字母，允许数字、字母、-、_，末位不可为-、_。
- **prompt_audio** (音频，可选): 可选的示例音频文件，有助于增强音色相似度和稳定性，支持mp3、m4a、wav格式，时长应小于8秒。
- **prompt_text** (字符串，可选): 示例音频对应的文本，需确保和音频内容一致，句末需有标点符号做结尾。
- **test_text** (字符串): 复刻试听参数，模型将使用复刻后的音色朗读本段文本内容，默认为"您好，这是克隆音色的试听音频。"。
- **model** (选择): 指定合成试听音频使用的语音模型，默认为"speech-2.5-hd-preview"。
- **need_noise_reduction** (布尔值): 音频复刻参数，表示是否开启降噪，默认为False。
- **need_volume_normalization** (布尔值): 音频复刻参数，是否开启音量归一化，默认为False。
- **api_key** (字符串，可选): MiniMax API的访问密钥。如果未提供，将使用配置文件中的密钥。

#### 输出

- **demo_audio** (音频): 使用克隆音色合成的试听音频。
- **cloned_voice_id** (字符串): 克隆成功的音色ID字符串。

### 组图功能说明

组图功能基于您输入的内容，生成一组内容关联的图片。支持以下模式：

1. **文生组图**: 根据文本提示词生成一组内容关联的图片（最多15张）
2. **单图生组图**: 根据单张参考图片+文本提示词生成一组内容关联的图片（最多14张）
3. **多图生组图**: 根据多张参考图片（2-10张）+文本提示词生成一组内容关联的图片（输入的参考图数量+最终生成的图片数量≤15张）

### 单图生成功能说明

1. **文生图**: 根据文本提示词生成单张图片
2. **单图生图**: 根据单张参考图片+文本提示词生成单张图片
3. **多图生图**: 根据多张参考图片（2-10张）+文本提示词生成单张图片

## 示例工作流

请参考`example_workflows`目录中的示例。

## 许可证

MIT License